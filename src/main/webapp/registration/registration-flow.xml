<?xml version='1.0' encoding='UTF-8'?>
<faces-config version="2.2" xmlns="http://xmlns.jcp.org/xml/ns/javaee"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
                                  http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd">
	<flow-definition id="registration">
		<start-node>registrationBegin</start-node>
		<view id="registrationBegin">
			<vdl-document>/registration/registration1.xhtml</vdl-document>
		</view>
		<flow-call id="callPendencies">
			<flow-reference>
				<flow-id>pendencies</flow-id>
			</flow-reference>
			<outbound-parameter>
				<name>userName</name>
				<value>#{testFlowBean.firstName}</value>
			</outbound-parameter>
			<outbound-parameter>
				<name>userSurname</name>
				<value>#{testFlowBean.lastName}</value>
			</outbound-parameter>
		</flow-call>
		<switch id="registrationPage2">
			<case>
				<if>#{not empty testFlowBean.firstName and not empty testFlowBean.lastName}</if>
				<from-outcome>registration2</from-outcome>
			</case>
			<default-outcome>registrationBegin</default-outcome>
		</switch>
		<flow-return id="exitToBegin">
			<from-outcome>/beginFlow.xhtml</from-outcome>
		</flow-return>
		<flow-return id="exitToIndex">
			<from-outcome>/index.xhtml</from-outcome>
		</flow-return>
		<finalizer>#{testFlowBean.save()}</finalizer>
	</flow-definition>
</faces-config>